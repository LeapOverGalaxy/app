(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-ExchangePosterBuyDetail"],{"066d":function(t,e,n){"use strict";var a={ucToast:n("e692").default,cPosterBrief:n("1550").default,cPosterStat:n("0d45").default,cLOG:n("b2b1").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"sPage"},[n("ucToast",{ref:"toast"}),n("v-uni-view",{staticClass:"sBody"},[n("v-uni-view",{staticClass:"sContent"},[n("v-uni-view",{staticClass:"sInfoGroup"},[n("v-uni-view",{staticClass:"sGroupTitle"},[t._v("广告信息")]),n("cPosterBrief",{attrs:{poster:t.$SS.Exchange.activePoster}}),n("cPosterStat",{attrs:{poster:t.$SS.Exchange.activePoster}})],1),n("v-uni-view",{staticClass:"sInfoGroup"},[t.myOrder.uuid?[n("v-uni-view",{staticClass:"sGroupTitle"},[t._v("我的订单")]),t._l([t.myOrder],(function(e,a){return n("v-uni-view",{key:a,staticClass:"sOrderCard",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showMyOrder(a)}}},[n("v-uni-view",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("v-uni-view",{staticStyle:{"font-size":"medium","font-weight":"bold"}},[n("v-uni-text",{staticStyle:{color:"#FC4E2B","margin-left":"8px"}},[t._v(t._s(e.amount))]),n("cLOG")],1),n("v-uni-view",{staticClass:"sDate"},[n("v-uni-label"),n("v-uni-text",{staticStyle:{"margin-left":"4px"}},[t._v(t._s(t.unimore.formatDate(e.startTime)))])],1)],1),n("v-uni-view",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("v-uni-view",{staticClass:"sInfo"},[n("v-uni-view",[n("v-uni-label",{staticStyle:{"margin-right":"8px","font-size":"small"}},[t._v("单价")]),n("span",{staticStyle:{"font-size":"medium"}},[t._v(t._s(t.unimore.formatMoney(e.poster.price)))]),n("cLOG",{attrs:{currency:"CNY"}})],1),n("v-uni-view",[n("v-uni-label",{staticStyle:{"margin-right":"8px","font-size":"small"}},[t._v("总价")]),n("span",{staticStyle:{"font-size":"medium"}},[t._v(t._s(t.unimore.formatMoney(e.amount*e.poster.price)))]),n("cLOG",{attrs:{currency:"CNY"}})],1)],1),n("v-uni-button",{staticClass:"sButton"},[t._v(t._s(t.lot.tOrderStatus[e.status]))])],1)],1)}))]:[n("v-uni-view",{staticClass:"sGroupTitle"},[t._v("我要出售")]),n("v-uni-view",{staticClass:"sInputLine"},[n("v-uni-label",[t._v(t._s(t.lot.tOrderAmount))]),n("v-uni-view",{staticClass:"sInputContent"},[n("v-uni-input",{staticStyle:{color:"#FC4E2B"},attrs:{type:"number",placeholder:t.lot.tOrderAmountPrompt},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.updateAmount.apply(void 0,arguments)}},model:{value:t.order.amount,callback:function(e){t.$set(t.order,"amount",e)},expression:"order.amount"}}),n("cLOG")],1)],1),n("v-uni-view",{staticClass:"sInputLine"},[n("v-uni-label",[t._v(t._s(t.lot.tOrderValue))]),n("v-uni-view",{staticClass:"sInputContent"},[n("v-uni-input",{staticStyle:{color:"#FC4E2B"},attrs:{type:"number",placeholder:t.lot.tOrderValuePrompt},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.updateValue.apply(void 0,arguments)}},model:{value:t.order.value,callback:function(e){t.$set(t.order,"value",e)},expression:"order.value"}}),n("cLOG",{attrs:{currency:"CNY"}})],1)],1)]],2),n("v-uni-view",{staticClass:"sFooter"},["CANCELED"===t.$SS.Exchange.activePoster.status?n("v-uni-view",{staticStyle:{"text-align":"center"}},[t._v("本广告已撤销")]):t.myOrder.uuid?t._e():n("v-uni-button",{staticClass:"sSubmitButton",attrs:{loading:t.isLoading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submitMyOrder.apply(void 0,arguments)}}},[t._v(t._s(t.lot.tSubmitButton))])],1)],1)],1)],1)},r=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}))},"169d":function(t,e,n){"use strict";var a=n("bb1d"),i=n.n(a);i.a},"31b2":function(t,e,n){"use strict";n.r(e);var a=n("066d"),i=n("77a4");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("169d");var o,s=n("f0c5"),u=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"4ff5f1e8",null,!1,a["a"],o);e["default"]=u.exports},"381c":function(t,e,n){"use strict";var a=n("ee27");n("dca8"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("f3f3")),r=a(n("d0af"));n("96cf");var o=a(n("c964")),s={data:function(){return{isLoading:!1,order:{},i18nText:Object.freeze({zhCN:{tPageTitle:"买家广告",tOrderAmount:"数量",tOrderAmountPrompt:"",tOrderValue:"价格",tOrderValuePrompt:"",tSubmitButton:"立刻下单",tSubmitButton4Cancel:"撤销我的广告",tOrderStatus:{WAITING_RELEASE:"等待我放币",WAITING_PAY:"等待对方付款",ORDER_COMPLETED:"交易完毕"}},enUS:{tPageTitle:""}}),myOrder:{}}},computed:{lot:getApp().unimore.localeText},onShow:function(){this.unimore.setBarTitles.call(this),this.getMyOrder()},methods:{getMyOrder:function(){var t=this;return(0,o.default)(regeneratorRuntime.mark((function e(){var n,a,i,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,t.unimore.request({url:"api/ExPoster/getMyOrder",data:{posterUuid:t.$SS.Exchange.activePoster.uuid,type:"SELL"}});case 3:n=e.sent,a=(0,r.default)(n,2),a[0],i=a[1],i=void 0===i?{}:i,o=i.data,s=void 0===o?{}:o,t.isLoading=!1,s.myOrder&&(t.myOrder=s.myOrder);case 11:case"end":return e.stop()}}),e)})))()},submitMyOrder:function(){var t=this;return(0,o.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.order.amount){e.next=5;break}return t.unimore.showToast.call(t,{type:"fail",title:"请输入您要购买的数量！"}),e.abrupt("return");case 5:if(!(t.order.amount>t.$SS.Exchange.activePoster.amount)){e.next=10;break}return t.unimore.showToast.call(t,{type:"fail",title:"您输入的数量已超过限额！"}),e.abrupt("return");case 10:if(!(t.order.amount>t.$SS.User.onlineUser.balance)){e.next=13;break}return t.unimore.showToast.call(t,{type:"fail",title:"您输入的数量已超过您的账户流动资金"}),e.abrupt("return");case 13:uni.showModal({title:"您确认提交本订单吗？",content:"请注意，提交订单后，即刻进入交易流程，无法撤销订单。",success:function(){var e=(0,o.default)(regeneratorRuntime.mark((function e(n){var a,o,s,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.confirm,n.cancel,t.isLoading=!0,e.next=4,t.unimore.request({url:"api/ExOrder/createOrder",data:{ExOrder:(0,i.default)({},t.order,{posterUuid:t.$SS.Exchange.activePoster.uuid})}});case 4:a=e.sent,o=(0,r.default)(a,2),o[0],s=o[1],s=void 0===s?{}:s,u=s.data,l=void 0===u?{}:u,t.isLoading=!1,e.t0=l._state,e.next="SUCCESS"===e.t0?14:"ORDER_IN_PROCESS"===e.t0?17:"BALANCE_NOT_ENOUGH"===e.t0?19:"POSTER_CANCELED"===e.t0?21:23;break;case 14:return t.$SS.Exchange.activeOrder=l.order,uni.navigateTo({url:"ExchangeOrderSellDetail"}),e.abrupt("break",24);case 17:return t.unimore.showToast.call(t,{type:"fail",title:"您有待完成的其他订单，请先处理完毕后，才能创建新的订单"}),e.abrupt("break",24);case 19:return t.unimore.showToast.call(t,{type:"fail",title:"您的流动资金不够"}),e.abrupt("break",24);case 21:return t.unimore.showToast.call(t,{type:"fail",title:"买家已经撤销了该广告，无法下单"}),e.abrupt("break",24);case 23:t.unimore.showToast.call(t,{type:"fail",title:"创建订单失败，请联系社区客服"});case 24:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()});case 14:case"end":return e.stop()}}),e)})))()},updateAmount:function(t){var e=t.target.value;this.order.value=e*this.$SS.Exchange.activePoster.price},updateValue:function(t){var e=t.target.value;this.order.amount=e/this.$SS.Exchange.activePoster.price},showMyOrder:function(){this.$SS.Exchange.activeOrder=this.myOrder,uni.navigateTo({url:"ExchangeOrderSellDetail"})}}};e.default=s},"668f":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/**\n * Theme\n */\n/******* LOG 私有定义 ************/.sInfoGroup[data-v-4ff5f1e8]{padding:%?15?%}.sGroupTitle[data-v-4ff5f1e8]{background:#f3f4f6;padding:10px;font-size:small;font-weight:700}.sInputLine[data-v-4ff5f1e8]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?15?%;height:%?50?%;line-height:%?50?%;font-size:medium}.sInputLine uni-label[data-v-4ff5f1e8]{-webkit-box-flex:0;-webkit-flex:none;flex:none;font-size:medium;width:40%}.sInputLine uni-picker[data-v-4ff5f1e8]{background:no-repeat 100%/contain;padding-right:%?50?%}.sInputLine .sInputContent[data-v-4ff5f1e8]{-webkit-box-flex:1;-webkit-flex:auto;flex:auto;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.sInputLine .sInputContent uni-input[data-v-4ff5f1e8]{-webkit-box-flex:1;-webkit-flex:auto;flex:auto;border-bottom:1px solid #f3f4f6;text-align:right;padding-right:%?20?%;padding-bottom:%?10?%}.sOrderCard[data-v-4ff5f1e8]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-flow:column nowrap;flex-flow:column nowrap;padding:%?15?%;border:1px solid #f3f4f6;margin:8px}.sOrderCard uni-button[data-v-4ff5f1e8]{margin:%?15?% 0;height:%?50?%;line-height:%?50?%;font-size:small}.sOrderCard .sDate[data-v-4ff5f1e8]{font-size:small;color:#909399}',""]),t.exports=e},"77a4":function(t,e,n){"use strict";n.r(e);var a=n("381c"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},bb1d:function(t,e,n){var a=n("668f");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("dae8c076",a,!0,{sourceMap:!1,shadowMode:!1})}}]);