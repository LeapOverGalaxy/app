(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-IdentRegisterVerify"],{28617:function(e,t,s){"use strict";var a=s("7ada"),n=s.n(a);n.a},4644:function(e,t,s){"use strict";var a,n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-uni-view",{staticClass:"sPage"},[s("v-uni-view",{staticClass:"sLogo"}),s("v-uni-view",{staticClass:"sForm"},[s("v-uni-view",{staticClass:"sInputField"},[s("v-uni-text",{staticClass:"sLabel"},[e._v(e._s(e.localeText.tPhoneLabel))]),s("v-uni-text",{staticClass:"sPhoneInput",class:{sErrorPrompt:!e._SS.Ident.phone}},[e._v(e._s(e._SS.Ident.phone||e.localeText.tEmptyPhone))])],1),s("v-uni-view",{staticClass:"sInputField"},[s("v-uni-text",{staticClass:"sLabel"},[e._v(e._s(e.localeText.tPasscodeLabel))]),s("v-uni-view",{staticClass:"sValue"},[s("v-uni-input",{staticClass:"sPasscodeInput",attrs:{type:"number",maxlength:"6",placeholder:e.passcodePrompt,"placeholder-class":e.passcodeFeedback?"sErrorPrompt":""},model:{value:e._SS.Ident.passcode,callback:function(t){e.$set(e._SS.Ident,"passcode",t)},expression:"_SS.Ident.passcode"}}),s("v-uni-button",{staticClass:"sPasscodeButton",attrs:{loading:e.isSending,disabled:e.isSendingDisabled},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getPasscode.apply(void 0,arguments)}}},[e._v(e._s((e.remainingSeconds?"("+e.remainingSeconds+") ":"")+e.localeText.tPasscodeButton))])],1)],1),s("v-uni-view",{staticClass:"sInputField"},[s("v-uni-text",{staticClass:"sLabel"},[e._v(e._s(e.localeText.tRegcodeLabel))]),s("v-uni-input",{staticClass:"sRegcodeInput",attrs:{type:"text",maxlength:"8",placeholder:e.regcodeFeedback,"placeholder-class":e.regcodeFeedback!==e.localeText.tRegcodePrompt?"sErrorPrompt":"",disabled:e._SS.Ident.regcodeFrozen},model:{value:e._SS.Ident.regcode,callback:function(t){e.$set(e._SS.Ident,"regcode",t)},expression:"_SS.Ident.regcode"}})],1)],1),s("v-uni-view",{staticClass:"sFooterFloating"},[s("v-uni-button",{staticClass:"sSubmitButton",attrs:{loading:e.isLoading,disabled:e.isLoading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.prepareRegister.apply(void 0,arguments)}}},[e._v(e._s(e.localeText.tVerifyButton))]),s("v-uni-text",{staticClass:"sSubmitFeedback",class:{sActive:e.submitFeedback}},[e._v(e._s(e.submitFeedback))])],1)],1)},i=[];s.d(t,"b",function(){return n}),s.d(t,"c",function(){return i}),s.d(t,"a",function(){return a})},"619a":function(e,t,s){var a=s("b041");t=e.exports=s("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/**\r\n * è¿™é‡Œæ˜¯uni-appå†…ç½®çš„å¸¸ç”¨æ ·å¼å˜é‡\r\n *\r\n * uni-app å®˜æ–¹æ‰©å±•æ’ä»¶åŠæ’ä»¶å¸‚åœºï¼ˆhttps://ext.dcloud.net.cnï¼‰ä¸Šå¾ˆå¤šä¸‰æ–¹æ’ä»¶å‡ä½¿ç”¨äº†è¿™äº›æ ·å¼å˜é‡\r\n * å¦‚æžœä½ æ˜¯æ’ä»¶å¼€å‘è€…ï¼Œå»ºè®®ä½ ä½¿ç”¨scssé¢„å¤„ç†ï¼Œå¹¶åœ¨æ’ä»¶ä»£ç ä¸­ç›´æŽ¥ä½¿ç”¨è¿™äº›å˜é‡ï¼ˆæ— éœ€ import è¿™ä¸ªæ–‡ä»¶ï¼‰ï¼Œæ–¹ä¾¿ç”¨æˆ·é€šè¿‡æ­ç§¯æœ¨çš„æ–¹å¼å¼€å‘æ•´ä½“é£Žæ ¼ä¸€è‡´çš„App\r\n *\r\n */\n/**\r\n * å¦‚æžœä½ æ˜¯Appå¼€å‘è€…ï¼ˆæ’ä»¶ä½¿ç”¨è€…ï¼‰ï¼Œä½ å¯ä»¥é€šè¿‡ä¿®æ”¹è¿™äº›å˜é‡æ¥å®šåˆ¶è‡ªå·±çš„æ’ä»¶ä¸»é¢˜ï¼Œå®žçŽ°è‡ªå®šä¹‰ä¸»é¢˜åŠŸèƒ½\r\n *\r\n * å¦‚æžœä½ çš„é¡¹ç›®åŒæ ·ä½¿ç”¨äº†scssé¢„å¤„ç†ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æŽ¥åœ¨ä½ çš„ scss ä»£ç ä¸­ä½¿ç”¨å¦‚ä¸‹å˜é‡ï¼ŒåŒæ—¶æ— éœ€ import è¿™ä¸ªæ–‡ä»¶\r\n */\n/* é¢œè‰²å˜é‡ */\n/* è¡Œä¸ºç›¸å…³é¢œè‰² */\n/* æ–‡å­—åŸºæœ¬é¢œè‰² */\n/* èƒŒæ™¯é¢œè‰² */\n/* è¾¹æ¡†é¢œè‰² */\n/* å°ºå¯¸å˜é‡ */\n/* æ–‡å­—å°ºå¯¸ */\n/* å›¾ç‰‡å°ºå¯¸ */\n/* Border Radius */\n/* æ°´å¹³é—´è· */\n/* åž‚ç›´é—´è· */\n/* é€æ˜Žåº¦ */\n/* æ–‡ç« åœºæ™¯ç›¸å…³ */\n/******* LOG ç§æœ‰å®šä¹‰ ************/.sPage[data-v-797e5372]{background-image:url('+a(s("6984"))+")}.sPage .sForm[data-v-797e5372]{padding:%?15?%\n\n}@media screen and (min-width:751px){.sPage .sForm[data-v-797e5372]{padding:2%}}.sPage .sForm .sInputField[data-v-797e5372]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;flex-flow:row nowrap;padding:%?15?%;border-bottom:1px solid #eee;color:#fff;margin:%?40?% auto\n\n}@media screen and (min-width:751px){.sPage .sForm .sInputField[data-v-797e5372]{margin:40px auto}}.sPage .sForm .sInputField .sLabel[data-v-797e5372]{width:25%;font-size:%?36?%\n\n}@media screen and (min-width:751px){.sPage .sForm .sInputField .sLabel[data-v-797e5372]{font-size:36px}}.sPage .sForm .sInputField .sPhoneInput[data-v-797e5372], .sPage .sForm .sInputField .sRegcodeInput[data-v-797e5372]{width:75%;font-size:%?36?%;letter-spacing:%?10?%\n\n}@media screen and (min-width:751px){.sPage .sForm .sInputField .sPhoneInput[data-v-797e5372], .sPage .sForm .sInputField .sRegcodeInput[data-v-797e5372]{font-size:36px}}.sPage .sForm .sInputField .sValue[data-v-797e5372]{width:75%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.sPage .sForm .sInputField .sPasscodeInput[data-v-797e5372]{font-size:%?36?%;letter-spacing:%?10?%;-webkit-box-flex:1;-webkit-flex:auto;flex:auto\n\n}@media screen and (min-width:751px){.sPage .sForm .sInputField .sPasscodeInput[data-v-797e5372]{font-size:36px}}.sPage .sForm .sInputField .sPasscodeButton[data-v-797e5372]{height:%?52?%;line-height:%?52?%;background:#fc962b;color:#000;font-size:small;margin:0;padding:0 %?15?%;-webkit-box-flex:0;-webkit-flex:none;flex:none\n\n}@media screen and (min-width:751px){.sPage .sForm .sInputField .sPasscodeButton[data-v-797e5372]{height:52px;line-height:52px;padding:0 15px}}.sPage .sForm .sInputField .sErrorPrompt[data-v-797e5372]{color:#fc4e2b;letter-spacing:unset}.sPage .sSubmitFeedback[data-v-797e5372]{font-size:small;color:#fc4e2b;-webkit-transition:all 1s ease-in-out 0s;transition:all 1s ease-in-out 0s;opacity:0;margin:%?20?% auto\n\n}@media screen and (min-width:751px){.sPage .sSubmitFeedback[data-v-797e5372]{margin:20px auto}}.sPage .sSubmitFeedback.sActive[data-v-797e5372]{opacity:1}",""])},"70b4":function(e,t,s){"use strict";s.r(t);var a=s("4644"),n=s("a8fc");for(var i in n)"default"!==i&&function(e){s.d(t,e,function(){return n[e]})}(i);s("28617");var o,d=s("f0c5"),c=Object(d["a"])(n["default"],a["b"],a["c"],!1,null,"797e5372",null,!1,a["a"],o);t["default"]=c.exports},"7ada":function(e,t,s){var a=s("619a");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=s("4f06").default;n("f9187698",a,!0,{sourceMap:!1,shadowMode:!1})},"9fca":function(e,t,s){"use strict";var a=s("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(s("0a0d")),i=a(s("768b"));s("96cf");var o=a(s("3b8d")),d=a(s("15b8")),c=a(s("84449")),r=60,l={data:function(){return{_SS:this.$store.state,isLoading:!1,isSending:!1,isSendingDisabled:!1,remainingSeconds:0,passcodeHash:"",passcodeExpireAt:"",passcodeFeedback:"",regcodeFeedback:"",submitFeedback:"",i18nText:(0,d.default)({zhCN:{tPageTitle:"éªŒè¯",tPhoneLabel:"æ‰‹æœºå·",tPasscodeLabel:"éªŒè¯ç ",tPasscodePrompt:"æ‰‹æœºçŸ­ä¿¡éªŒè¯ç ",tPasscodeButton:"èŽ·å–",tPasscodeSent:"éªŒè¯ç å·²æˆåŠŸå‘é€",tPasscodeMalformed:"æ ¼å¼é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥",tPasscodeUnsent:"å‘é€å¤±è´¥ï¼Œè¯·ç¨åŽå†è¯•",tPasscodeMismatchClient:"éªŒè¯é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥",tPasscodeExpired:"å·²è¿‡æœŸï¼Œè¯·é‡æ–°èŽ·å–",tPasscodeMismatchServer:"éªŒè¯å¤±è´¥ï¼Œè¯·é‡æ–°èŽ·å–",tBadResponse:"ðŸ˜­ åŽå°é”™è¯¯ï¼Œè¯·ç¨åŽå†è¯•",tVerifyButton:"éªŒ è¯",tEmptyPhone:"æ‰‹æœºå·ä¸å­˜åœ¨",tRegcodeLabel:"é‚€è¯·ç ",tRegcodePrompt:"æ‚¨çš„æ³¨å†Œé‚€è¯·ç ",tRegcodeMalformed:"æ ¼å¼é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥",tRegcodeNotExist:"æ— æ•ˆçš„é‚€è¯·ç ï¼Œè¯·é‡æ–°è¾“å…¥"},enUS:{tPageTitle:"éªŒè¯",tPhoneLabel:"æ‰‹æœºå·",tPasscodeLabel:"éªŒè¯ç ",tPasscodePrompt:"æ‰‹æœºçŸ­ä¿¡éªŒè¯ç ",tPasscodeButton:"èŽ·å–",tPasscodeSent:"éªŒè¯ç å·²æˆåŠŸå‘é€",tPasscodeMalformed:"æ ¼å¼é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥",tPasscodeUnsent:"å‘é€å¤±è´¥ï¼Œè¯·ç¨åŽå†è¯•",tPasscodeMismatchClient:"éªŒè¯é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥",tPasscodeExpired:"å·²è¿‡æœŸï¼Œè¯·é‡æ–°èŽ·å–",tPasscodeMismatchServer:"éªŒè¯å¤±è´¥ï¼Œè¯·é‡æ–°èŽ·å–",tBadResponse:"ðŸ˜­ åŽå°é”™è¯¯ï¼Œè¯·ç¨åŽå†è¯•",tVerifyButton:"éªŒ è¯",tEmptyPhone:"æ‰‹æœºå·ä¸å­˜åœ¨",tRegcodeLabel:"é‚€è¯·ç ",tRegcodePrompt:"æ‚¨çš„æ³¨å†Œé‚€è¯·ç ",tRegcodeMalformed:"æ ¼å¼é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥",tRegcodeNotExist:"æ— æ•ˆçš„é‚€è¯·ç ï¼Œè¯·é‡æ–°è¾“å…¥"}})}},computed:{localeText:function(){return this.i18nText[this._SS.i18n.activeLang]},passcodePrompt:function(){return this.passcodeFeedback?(this._SS.Ident.passcode="",this.passcodeFeedback):this.localeText.tPasscodePrompt}},onLoad:function(){this.$store.dispatch("Ident/restartIfOnline"),this.regcodeFeedback=this.localeText.tRegcodePrompt},onShow:function(){uni.setNavigationBarTitle({title:this.$store.getters["i18n/getAppName"]+": "+this.localeText.tPageTitle})},methods:{getPasscode:function(){var e=(0,o.default)(regeneratorRuntime.mark(function e(){var t,s,a,n,o,d=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this._SS.Ident.phone||!this._SS.Ident.uuid){e.next=15;break}return this.isSending=!0,this.isSendingDisabled=!0,e.next=5,this.uni2log.request({url:"api/User/sendPasscode",data:{}});case 5:t=e.sent,s=(0,i.default)(t,2),s[0],a=s[1],this.isSending=!1,this.remainingSeconds=r,n=setInterval(function(){d.remainingSeconds>0?d.remainingSeconds--:(clearInterval(n),d.isSendingDisabled=!1)},1e3),a&&a.data?(o=a.data,a.header,a.statusCode,"PASSCODE_SENT"===o._state?(uni.setStorageSync("_passtoken",o._passtoken),this.passcodeHash=o.passcodeHash,this.passcodeExpireAt=o.passcodeExpireAt,this.passcodeFeedback=this.localeText.tPasscodeSent):"PASSCODE_UNSENT"===o._state?this.passcodeFeedback=this.localeText.tPasscodeUnsent:uni.showToast({image:"../static/Common.fail.png",title:this.localeText.tBadResponse})):uni.showToast({image:"../static/Common.fail.png",title:this.localeText.tBadResponse}),e.next=16;break;case 15:uni.redirectTo({url:"Ident"});case 16:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),validateInput:function(){var e=!0;return/^\d{6}$/.test(this._SS.Ident.passcode)?(0,n.default)()>this.passcodeExpireAt?(this.passcodeFeedback=this.localeText.tPasscodeExpired,this._SS.Ident.passcode="",e=!1):c.default.hash(this._SS.Ident.passcode+this._SS.Ident.uuid)!==this.passcodeHash&&(this.passcodeFeedback=this.localeText.tPasscodeMismatchClient,this._SS.Ident.passcode="",e=!1):(this.passcodeFeedback=this.localeText.tPasscodeMalformed,this._SS.Ident.passcode="",e=!1),/^[0-9a-zA-Z]{6,8}$/.test(this._SS.Ident.regcode)||(this.regcodeFeedback=this.localeText.tRegcodeMalformed,this._SS.Ident.regcode="",e=!1),e},prepareRegister:function(){var e=(0,o.default)(regeneratorRuntime.mark(function e(){var t,s,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.validateInput()){e.next=10;break}return this.isLoading=!0,e.next=4,this.uni2log.request({url:"api/User/prepareRegister",data:{passcode:this._SS.Ident.passcode,regcode:this._SS.Ident.regcode}});case 4:t=e.sent,s=(0,i.default)(t,2),s[0],a=s[1],this.isLoading=!1,a&&a.data&&(n=a.data,a.header,a.statusCode,"VERIFY_SUCCESS"===n._state?(uni.setStorageSync("_passtoken",n._passtoken),uni.navigateTo({url:"IdentRegister"})):"PASSCODE_EXPIRED"===n._state?(this.passcodeFeedback=this.localeText.tPasscodeExpired,this._SS.Ident.passcode=""):"REGCODE_USER_NOTEXIST"===n._state?(this.regcodeFeedback=this.localeText.tRegcodeNotExist,this._SS.Ident.regcode="",this._SS.Ident.regcodeFrozen=!1):(this.passcodeFeedback=this.localeText.tPasscodeMismatchServer,this._SS.Ident.passcode=""));case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}};t.default=l},a8fc:function(e,t,s){"use strict";s.r(t);var a=s("9fca"),n=s.n(a);for(var i in a)"default"!==i&&function(e){s.d(t,e,function(){return a[e]})}(i);t["default"]=n.a}}]);