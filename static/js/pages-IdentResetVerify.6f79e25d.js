(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-IdentResetVerify"],{"089b":function(e,t,s){var a=s("2bd5");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=s("4f06").default;n("1a68eab7",a,!0,{sourceMap:!1,shadowMode:!1})},2653:function(e,t,s){"use strict";s.r(t);var a=s("4185"),n=s("958a");for(var o in n)"default"!==o&&function(e){s.d(t,e,(function(){return n[e]}))}(o);s("8592");var i,d=s("f0c5"),r=Object(d["a"])(n["default"],a["b"],a["c"],!1,null,"6ee8f106",null,!1,a["a"],i);t["default"]=r.exports},"2bd5":function(e,t,s){var a=s("24fb"),n=s("1de5"),o=s("6984");t=a(!1);var i=n(o);t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/**\n * Theme\n */\n/******* LOG 私有定义 ************/.sPage[data-v-6ee8f106]{background-image:url('+i+")}.sPage .sForm[data-v-6ee8f106]{padding:%?15?%\n}@media screen and (min-width:751px){.sPage .sForm[data-v-6ee8f106]{padding:2%}}.sPage .sForm .sInputField[data-v-6ee8f106]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;flex-flow:row nowrap;padding:%?15?%;border-bottom:1px solid #f3f4f6;color:#fff;margin:%?20?% auto\n}@media screen and (min-width:751px){.sPage .sForm .sInputField[data-v-6ee8f106]{margin:20px auto}}.sPage .sForm .sInputField .sLabel[data-v-6ee8f106]{width:25%;font-size:%?36?%\n}@media screen and (min-width:751px){.sPage .sForm .sInputField .sLabel[data-v-6ee8f106]{font-size:36px}}.sPage .sForm .sInputField .sPhoneInput[data-v-6ee8f106]{width:75%;font-size:%?36?%;letter-spacing:%?10?%\n}@media screen and (min-width:751px){.sPage .sForm .sInputField .sPhoneInput[data-v-6ee8f106]{font-size:36px}}.sPage .sForm .sInputField .sValue[data-v-6ee8f106]{width:75%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.sPage .sForm .sInputField .sPasscodeInput[data-v-6ee8f106]{font-size:%?36?%;letter-spacing:%?10?%;-webkit-box-flex:1;-webkit-flex:auto;flex:auto\n}@media screen and (min-width:751px){.sPage .sForm .sInputField .sPasscodeInput[data-v-6ee8f106]{font-size:36px}}.sPage .sForm .sInputField .sPasscodeButton[data-v-6ee8f106]{height:%?52?%;line-height:%?52?%;background:#fc962b;color:#000;font-size:small;margin:0;padding:0 %?15?%;-webkit-box-flex:0;-webkit-flex:none;flex:none\n}@media screen and (min-width:751px){.sPage .sForm .sInputField .sPasscodeButton[data-v-6ee8f106]{height:52px;line-height:52px;padding:0 15px}}.sPage .sForm .sInputField .sErrorPrompt[data-v-6ee8f106]{color:#fc4e2b;letter-spacing:normal}.sPage .sForm .sInputField .sPlaceholder[data-v-6ee8f106]{letter-spacing:normal}",""]),e.exports=t},4185:function(e,t,s){"use strict";var a={ucToast:s("e692").default},n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-uni-view",{staticClass:"sPage"},[s("ucToast",{ref:"toast"}),s("v-uni-view",{staticClass:"sLogo"}),s("v-uni-view",{staticClass:"sForm"},[s("v-uni-view",{staticClass:"sInputField"},[s("v-uni-text",{staticClass:"sLabel"},[e._v(e._s(e.lot.tPhoneLabel))]),s("v-uni-text",{staticClass:"sPhoneInput",class:{sErrorPrompt:!e.$SS.Ident.phone}},[e._v(e._s(e.$SS.Ident.phone||e.lot.tEmptyPhone))])],1),s("v-uni-view",{staticClass:"sInputField"},[s("v-uni-text",{staticClass:"sLabel"},[e._v(e._s(e.lot.tPasscodeLabel))]),s("v-uni-view",{staticClass:"sValue"},[s("v-uni-input",{staticClass:"sPasscodeInput",attrs:{type:"number",maxlength:"6",placeholder:e.passcodePrompt,"placeholder-class":e.passcodeFeedback?"sErrorPrompt":"sPlaceholder"},model:{value:e.$SS.Ident.passcode,callback:function(t){e.$set(e.$SS.Ident,"passcode",t)},expression:"$SS.Ident.passcode"}}),s("v-uni-button",{staticClass:"sPasscodeButton",attrs:{loading:e.isSending,disabled:e.isSendingDisabled},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getPasscode.apply(void 0,arguments)}}},[e._v(e._s((e.remainingSeconds?"("+e.remainingSeconds+") ":"")+e.lot.tPasscodeButton))])],1)],1)],1),s("v-uni-view",{staticClass:"sFooterFloating"},[s("v-uni-button",{staticClass:"sSubmitButton",attrs:{loading:e.isLoading,disabled:e.isLoading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.verifyPasscode.apply(void 0,arguments)}}},[e._v(e._s(e.lot.tVerifyButton))])],1)],1)},o=[];s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return a}))},6984:function(e,t,s){e.exports=s.p+"static/img/Welcome.background.7d4c136f.jpg"},8592:function(e,t,s){"use strict";var a=s("089b"),n=s.n(a);n.a},"958a":function(e,t,s){"use strict";s.r(t);var a=s("fa8f"),n=s.n(a);for(var o in a)"default"!==o&&function(e){s.d(t,e,(function(){return a[e]}))}(o);t["default"]=n.a},fa8f:function(e,t,s){"use strict";var a=s("ee27");s("dca8"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(s("d0af"));s("96cf");var o=a(s("c964")),i=60,d={data:function(){return{isLoading:!1,isSending:!1,isSendingDisabled:!1,remainingSeconds:0,passcodeHash:"",passcodeExpireAt:"",passcodeFeedback:"",i18nText:Object.freeze({zhCN:{tPageTitle:"重置密码",tPhoneLabel:"手机号",tPasscodeLabel:"验证码",tPasscodePrompt:"手机短信验证码",tPasscodeButton:"获取",tPasscodeSent:"验证码已成功发送",tPasscodeMalformed:"格式错误，请重新输入",tPasscodeUnsent:"发送失败，请稍后再试",tPasscodeMismatchClient:"验证错误，请重新输入",tPasscodeExpired:"已过期，请重新获取",tPasscodeMismatchServer:"验证失败，请重新获取",tBadResponse:"后台错误，请稍后再试",tVerifyButton:"验 证",tEmptyPhone:"手机号不存在"},enUS:{tPageTitle:"重置密码",tPhoneLabel:"手机号",tPasscodeLabel:"验证码",tPasscodePrompt:"手机短信验证码",tPasscodeButton:"获取",tPasscodeSent:"验证码已成功发送",tPasscodeMalformed:"格式错误，请重新输入",tPasscodeUnsent:"发送失败，请稍后再试",tPasscodeMismatchClient:"验证错误，请重新输入",tPasscodeExpired:"已过期，请重新获取",tPasscodeMismatchServer:"验证失败，请重新获取",tBadResponse:"后台错误，请稍后再试",tVerifyButton:"验 证",tEmptyPhone:"手机号不存在"}})}},computed:{lot:function(){return this.i18nText[this.$SS.i18n.activeLang]},passcodePrompt:function(){return this.passcodeFeedback?(this.$SS.Ident.passcode="",this.passcodeFeedback):this.lot.tPasscodePrompt}},onLoad:function(){this.$store.dispatch("Ident/restartIfOnline")},onShow:function(){this.unimore.setBarTitles.call(this)},methods:{getPasscode:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var s,a,o,d,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$SS.Ident.phone||!e.$SS.Ident.uuid){t.next=17;break}return e.isSending=!0,e.isSendingDisabled=!0,t.next=5,e.unimore.request({url:"api/User/sendPasscode",data:{}});case 5:s=t.sent,a=(0,n.default)(s,2),a[0],o=a[1],o=void 0===o?{}:o,d=o.data,r=void 0===d?{}:d,o.statusCode,o.header,o.errMsg,e.isSending=!1,e.remainingSeconds=i,c=setInterval((function(){e.remainingSeconds>0?e.remainingSeconds--:(clearInterval(c),e.isSendingDisabled=!1)}),1e3),r?"PASSCODE_SENT"===r._state?(uni.setStorageSync("_passtoken",r._passtoken),e.passcodeHash=r.passcodeHash,e.passcodeExpireAt=r.passcodeExpireAt,e.unimore.showToast.call(e,{type:"success",title:e.lot.tPasscodeSent})):"PASSCODE_UNSENT"===r._state?e.unimore.showToast.call(e,{type:"fail",title:e.lot.tPasscodeUnsent}):e.unimore.showToast.call(e,{type:"fail",title:e.lot.tBadResponse}):e.unimore.showToast.call(e,{type:"fail",title:e.lot.tBadResponse}),t.next=18;break;case 17:uni.redirectTo({url:"Ident"});case 18:case"end":return t.stop()}}),t)})))()},validateInput:function(){var e=!0;return/^\d{6}$/.test(this.$SS.Ident.passcode)?Date.now()>this.passcodeExpireAt?(this.passcodeFeedback=this.lot.tPasscodeExpired,this.$SS.Ident.passcode="",e=!1):this.unimore.hash(this.$SS.Ident.passcode+this.$SS.Ident.uuid)!==this.passcodeHash&&(this.passcodeFeedback=this.lot.tPasscodeMismatchClient,this.$SS.Ident.passcode="",e=!1):(this.passcodeFeedback=this.lot.tPasscodeMalformed,this.$SS.Ident.passcode="",e=!1),e},verifyPasscode:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var s,a,o,i,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.validateInput()){t.next=12;break}return e.isLoading=!0,t.next=4,e.unimore.request({url:"api/User/verifyPasscode",data:{passcode:e.$SS.Ident.passcode}});case 4:s=t.sent,a=(0,n.default)(s,2),a[0],o=a[1],o=void 0===o?{}:o,i=o.data,d=void 0===i?{}:i,o.statusCode,o.header,o.errMsg,e.isLoading=!1,d&&("VERIFY_SUCCESS"===d._state?(uni.setStorageSync("_passtoken",d._passtoken),uni.navigateTo({url:"IdentReset"})):"PASSCODE_EXPIRED"===d._state?(e.passcodeFeedback=e.lot.tPasscodeExpired,e.$SS.Ident.passcode=""):(e.passcodeFeedback=e.lot.tPasscodeMismatchServer,e.$SS.Indent.passcode=""));case 12:case"end":return t.stop()}}),t)})))()}}};t.default=d}}]);