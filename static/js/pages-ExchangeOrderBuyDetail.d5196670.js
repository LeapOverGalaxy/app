(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-ExchangeOrderBuyDetail"],{"0213":function(t,e,n){"use strict";var a=n("1a7a"),i=n.n(a);i.a},"1a7a":function(t,e,n){var a=n("9f73");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("0476e2c4",a,!0,{sourceMap:!1,shadowMode:!1})},"37fa8":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{currency:{type:String,default:"LOG"}},data:function(){return{}}};e.default=a},4763:function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-text",[t._v(t._s(t.currency))])},s=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return a}))},"4f46":function(t,e,n){"use strict";n.r(e);var a=n("37fa8"),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=i.a},"8db1":function(t,e,n){"use strict";var a={ucToast:n("e692").default,uniCountdown:n("865c").default,cPayChannelView:n("34bb").default,cLOG:n("b2b1").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"sPage"},[n("ucToast",{ref:"toast"}),n("v-uni-view",{staticClass:"sBody"},[n("v-uni-view",{staticClass:"sContent"},[n("v-uni-view",{staticStyle:{display:"flex","flex-flow":"column nowrap","justify-content":"space-around","align-items":"center","font-size":"small"}},[n("span",{staticStyle:{"margin-top":"20px","font-size":"medium"}},[t._v(t._s(t.lot.tStatus[t.$SS.Exchange.activeOrder.status]))]),n("v-uni-view",{staticStyle:{color:"#FC4E2B",margin:"10px","font-size":"x-large"}},[n("span",{staticStyle:{"margin-right":"5px"}},[t._v(t._s(t.unimore.formatMoney(t.$SS.Exchange.activeOrder.amount*t.$SS.Exchange.activeOrder.poster.price)))]),n("span",{staticStyle:{"margin-left":"5px"}},[t._v("CNY")])]),!t.timeup&&t.deadline>Date.now()&&"ORDER_COMPLETED"!==t.$SS.Exchange.activeOrder.status?[n("uniCountdown",{staticClass:"sCountdown",attrs:{"background-color":"#EEEEEE","show-day":!1,"show-hour":!1,"show-colon":!1,targetTime:t.targetTime},on:{timeup:function(e){arguments[0]=e=t.$handleEvent(e),t.timeup=!0}}})]:t._e(),"WAITING_PAY"===t.$SS.Exchange.activeOrder.status?[!t.timeup&&t.deadline>Date.now()?[n("span",[t._v("（请在截止时间之前完成付款，超时将自动取消订单。）")])]:[n("span",[t._v("已超时！订单已取消。")]),n("span",[t._v("（您未能在 "+t._s(t.unimore.formatDate(t.deadline,t.lot.tDateFormat))+" 之前确认付款。）")])]]:"WAITING_RELEASE"===t.$SS.Exchange.activeOrder.status?[!t.timeup&&t.deadline>Date.now()?[t._v("卖家应当在截止时间之前确认收款并放币，如超时可申诉")]:[t._v("卖家已超时("+t._s(t.unimore.formatDate(t.deadline,t.lot.tDateFormat))+")未放币，您可进行申诉。")]]:"ORDER_COMPLETED"===t.$SS.Exchange.activeOrder.status?[t._v("已完成")]:[t._v("未知的订单状态")]],2),n("v-uni-view",{staticClass:"sInfoGroup"},[n("v-uni-view",{staticClass:"sGroupTitle"},[t._v("转账渠道")]),n("cPayChannelView",{attrs:{payChannel:t.$SS.Exchange.activeOrder.poster.payChannel}})],1),n("v-uni-view",{staticClass:"sInfoGroup"},[n("v-uni-view",{staticClass:"sGroupTitle"},[t._v("交易信息")]),n("v-uni-view",{staticClass:"sInputLine"},[n("v-uni-label",[t._v("数量")]),n("v-uni-view",{staticClass:"sInputContent"},[n("span",{staticClass:"sValue"},[t._v(t._s(t.$SS.Exchange.activeOrder.amount))]),n("cLOG")],1)],1),n("v-uni-view",{staticClass:"sInputLine"},[n("v-uni-label",[t._v("单价")]),n("v-uni-view",{staticClass:"sInputContent"},[n("span",{staticClass:"sValue"},[t._v(t._s(t.unimore.formatMoney(t.$SS.Exchange.activeOrder.poster.price)))]),n("cLOG",{attrs:{currency:"CNY"}})],1)],1)],1),n("v-uni-view",{staticClass:"sFooter",staticStyle:{display:"flex"}},["WAITING_PAY"===t.$SS.Exchange.activeOrder.status?[!t.timeup&&t.deadline>Date.now()?n("v-uni-button",{staticClass:"sSubmitButton",attrs:{loading:t.isLoading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmPay.apply(void 0,arguments)}}},[t._v(t._s(t.lot.tSubmitButton||"确认已完成付款"))]):t._e()]:t._e(),"WAITING_RELEASE"===t.$SS.Exchange.activeOrder.status?[!t.timeup&&t.deadline>Date.now()?n("v-uni-button",{staticClass:"sSubmitButton"},[t._v("刷新订单状态")]):n("v-uni-button",{staticClass:"sSubmitButton",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.complain.apply(void 0,arguments)}}},[t._v("对方超时，发起投诉")])]:t._e()],2)],1)],1)],1)},s=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return a}))},"9f73":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,"uni-text[data-v-01aa0f7a]{margin-left:4px;font-size:small}",""]),t.exports=e},b2b1:function(t,e,n){"use strict";n.r(e);var a=n("4763"),i=n("4f46");for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("0213");var r,o=n("f0c5"),c=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"01aa0f7a",null,!1,a["a"],r);e["default"]=c.exports},c02c:function(t,e,n){"use strict";n.r(e);var a=n("8db1"),i=n("fdf1");for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("e07b8");var r,o=n("f0c5"),c=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"fc686212",null,!1,a["a"],r);e["default"]=c.exports},c15c:function(t,e,n){"use strict";(function(t){var a=n("ee27");n("dca8"),n("07ac"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("d0af"));n("96cf");var s=a(n("c964")),r={data:function(){return{isLoading:!1,i18nText:Object.freeze({zhCN:{tPageTitle:"我的买入订单",tSubmitButton:"确认已完成付款",tDateFormat:"dd日 HH:MM",tStatus:{WAITING_PAY:"请及时付款",WAITING_RELEASE:"等待卖家放币",ORDER_COMPLETED:"卖家已放币，交易完成"}},enUS:{tPageTitle:"My Buy Order"}}),channelInfo:{},timeup:!1}},computed:{lot:getApp().unimore.localeText,deadline:function(){switch(this.$SS.Exchange.activeOrder.status){case"WAITING_PAY":return new Date(this.$SS.Exchange.activeOrder.startTime).valueOf()+18e5;case"WAITING_RELEASE":return new Date(this.$SS.Exchange.activeOrder.payTime).valueOf()+18e5}},targetTime:function(){var t=0;return"WAITING_PAY"===this.$SS.Exchange.activeOrder.status?t=new Date(this.$SS.Exchange.activeOrder.startTime).valueOf()+18e5:"WAITING_RELEASE"===this.$SS.Exchange.activeOrder.status&&(t=new Date(this.$SS.Exchange.activeOrder.payTime).valueOf()+18e5),new Date(t)}},onLoad:function(){var e=this;this.channelInfo=Object.values(this.$SS.Exchange.activeOrder.poster.payChannel)[0],0===this.$SKT.countListener("RELEASE_CONFIRMED")&&this.$SKT.addListener("RELEASE_CONFIRMED",(function(n){t("log","release confirmed!"," at pages/ExchangeOrderBuyDetail.vue:53"),e.$SS.Exchange.activeOrder.status=n.order.status,e.$SS.Exchange.activeOrder.releaseTime=n.order.releaseTime,e.unimore.showToast.call(e,{title:"卖家已确认收款并放币。"})}))},onShow:function(){this.unimore.setBarTitles.call(this)},methods:{confirmPay:function(){var e=this;uni.showModal({title:"您真的要确认，您已支付给对方？",content:"确认后，对方将收到通知，并在30分钟内放币。",success:function(){var n=(0,s.default)(regeneratorRuntime.mark((function n(a){var s,r,o,c,u,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(s=a.confirm,a.cancel,!s){n.next=13;break}return e.isLoading=!0,n.next=5,e.unimore.request({url:"api/ExOrder/confirmPay",data:{ExOrder:e.$SS.Exchange.activeOrder}});case 5:r=n.sent,o=(0,i.default)(r,2),o[0],c=o[1],c=void 0===c?{}:c,u=c.data,l=void 0===u?{}:u,e.isLoading=!1,"SUCCESS"===l._state?(t("log",l," at pages/ExchangeOrderBuyDetail.vue:77"),e.$SS.Exchange.activeOrder=l.order):"PAY_EXPIRED"===l._state&&e.unimore.showToast.call(e,{type:"fail",title:"已超时，无法确认支付"});case 13:case"end":return n.stop()}}),n)})));function a(t){return n.apply(this,arguments)}return a}()})},complain:function(){uni.showModal({title:"我要投诉",content:"对方没有按时支付",success:function(t){t.confirm,t.cancel}})}}};e.default=r}).call(this,n("0de9")["log"])},d6df:function(t,e,n){var a=n("e5f4");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("c89a3154",a,!0,{sourceMap:!1,shadowMode:!1})},e07b8:function(t,e,n){"use strict";var a=n("d6df"),i=n.n(a);i.a},e5f4:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/**\n * Theme\n */\n/******* LOG 私有定义 ************/.sFooter uni-button[data-v-fc686212]{-webkit-box-flex:1;-webkit-flex:auto;flex:auto}.sInfoGroup[data-v-fc686212]{padding:%?15?%}.sGroupTitle[data-v-fc686212]{background:#f3f4f6;padding:10px;font-size:small;font-weight:700}.sInputLine[data-v-fc686212]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?15?%;height:%?50?%;line-height:%?50?%;font-size:medium;border-bottom:1px solid #f3f4f6}.sInputLine uni-label[data-v-fc686212]{-webkit-box-flex:0;-webkit-flex:none;flex:none;font-size:medium;width:40%}.sInputLine .sInputContent[data-v-fc686212]{-webkit-box-flex:1;-webkit-flex:auto;flex:auto;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.sInputLine .sValue[data-v-fc686212]{padding:0 5px}',""]),t.exports=e},fdf1:function(t,e,n){"use strict";n.r(e);var a=n("c15c"),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=i.a}}]);